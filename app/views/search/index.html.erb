<h3 style="padding-top: 10px;">Search for Quotes</h3>
<%= form_tag search_path, method: :get do %>
  <div class="form-group" style="padding-bottom: 10px;">
    <%= text_field_tag :quote_query, params[:quote_query], placeholder: 'Enter a quote, philosopher, or category', class: "form-control" %>
  </div>
  <%= submit_tag 'Search Quotes', class: "btn btn-primary" %>
<% end %>

<!-- The line below checks that the form has been submitted by checking the existence of 
a params[:quote_query] object, which will return either true or false; if false, no 
part of the code that follows will be executed -->
<% if params[:quote_query].present? %>
  <% if @quotes.present? %>
    <h4 style="padding-top: 15px;">Results:</h4>
    <% @quotes.each do |quote| %>
      <div class="card bg-light mb-3">
        <div class="card-body">
          <h5 class="text-primary">"<%= quote.quote_text %>"</h5>
          
          <p><strong>Philosopher:</strong>
            <% if quote.philosopher %>
              <%= quote.philosopher.phil_first_name %> <%= quote.philosopher.phil_last_name %>
            <% else %>
              Unknown Philosopher
            <% end %>
          </p>

          <p><strong>Categories:</strong>
            <% if quote.categories.any? %>
              <%= quote.categories.map(&:category_name).join(', ') %>
            <% else %>
              No categories assigned
            <% end %>
          </p>

          <p><strong>Publication Year:</strong> <%= quote.pub_year %></p>
          <p><strong>Comment:</strong> <%= quote.comment %></p>
        </div>
      </div>
    <% end %>
  <% else %>
    <p>No matching quotes found.</p>
  <% end %>
<% end %>
